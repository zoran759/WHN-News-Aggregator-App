<!DOCTYPE html>
{% load staticfiles %}
<html lang="en">
<head>
    <meta charset="UTF-8">
        <meta charset="utf-8">
    {% block viewport %}
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
    {% endblock viewport %}
    <meta name="description" content="">
    <meta name="author" content="">
    <meta property="og:title" content="{% block meta-title %}WHITE HAT NEWS{% endblock %}">
    <meta property="og:type" content="website">
    <meta property="og:image" content="https://news.viceroy.tech{% static 'images/og.jpg' %}"/>
    {% block meta_description %}
        <meta property="og:description" content="{{ title_tagline }}">{% endblock %}
    <link rel="shortcut icon" href="{% static 'images/favicon.png' %}">

    {% block title %}<title>White Hat News</title>{% endblock %}

    <link href="{% static 'bootstrap-4.3.1/css/bootstrap.min.css' %}" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700" type="text/css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
{#    <link rel="stylesheet" href="https://code.getmdl.io/1.1.3/material.indigo-pink.min.css">#}
    <link href="{% static 'css/new_base.css' %}" rel="stylesheet">
    <!--<script defer src="https://code.getmdl.io/1.1.3/material.min.js"></script> -->
    {% block css %} {% endblock %}

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
        <script src="../../assets/js/html5shiv.js"></script>
        <script src="../../assets/js/respond.min.js"></script>
        <![endif]-->
    <!-- Hotjar Tracking Code for https://news.viceroy.tech -->
    <script type="text/javascript" src="{% static 'js/js.cookie.js' %}"></script>
    <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script>
        (function(h,o,t,j,a,r){
            h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};
            h._hjSettings={hjid:1307519,hjsv:6};
            a=o.getElementsByTagName('head')[0];
            r=o.createElement('script');r.async=1;
            r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;
            a.appendChild(r);
        })(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');
    </script>
    <!-- Facebook Pixel Code -->
    <script>
        !function(f,b,e,v,n,t,s)
        {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
            n.callMethod.apply(n,arguments):n.queue.push(arguments)};
            if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
            n.queue=[];t=b.createElement(e);t.async=!0;
            t.src=v;s=b.getElementsByTagName(e)[0];
            s.parentNode.insertBefore(t,s)}(window, document,'script',
            'https://connect.facebook.net/en_US/fbevents.js');
        fbq('init', '2333958453529271');
        fbq('track', 'PageView');
    </script>
    <noscript><img height="1" width="1" style="display:none"
                   src="https://www.facebook.com/tr?id=2333958453529271&ev=PageView&noscript=1"
    /></noscript>
    <!-- End Facebook Pixel Code -->

    <!-- start Mixpanel -->
    <script type="text/javascript">(function(c,a){if(!a.__SV){var b=window;try{var d,m,j,k=b.location,f=k.hash;d=function(a,b){return(m=a.match(RegExp(b+"=([^&]*)")))?m[1]:null};f&&d(f,"state")&&(j=JSON.parse(decodeURIComponent(d(f,"state"))),"mpeditor"===j.action&&(b.sessionStorage.setItem("_mpcehash",f),history.replaceState(j.desiredHash||"",c.title,k.pathname+k.search)))}catch(n){}var l,h;window.mixpanel=a;a._i=[];a.init=function(b,d,g){function c(b,i){var a=i.split(".");2==a.length&&(b=b[a[0]],i=a[1]);b[i]=function(){b.push([i].concat(Array.prototype.slice.call(arguments,
    0)))}}var e=a;"undefined"!==typeof g?e=a[g]=[]:g="mixpanel";e.people=e.people||[];e.toString=function(b){var a="mixpanel";"mixpanel"!==g&&(a+="."+g);b||(a+=" (stub)");return a};e.people.toString=function(){return e.toString(1)+".people (stub)"};l="disable time_event track track_pageview track_links track_forms track_with_groups add_group set_group remove_group register register_once alias unregister identify name_tag set_config reset opt_in_tracking opt_out_tracking has_opted_in_tracking has_opted_out_tracking clear_opt_in_out_tracking people.set people.set_once people.unset people.increment people.append people.union people.track_charge people.clear_charges people.delete_user people.remove".split(" ");
    for(h=0;h<l.length;h++)c(e,l[h]);var f="set set_once union unset remove delete".split(" ");e.get_group=function(){function a(c){b[c]=function(){call2_args=arguments;call2=[c].concat(Array.prototype.slice.call(call2_args,0));e.push([d,call2])}}for(var b={},d=["get_group"].concat(Array.prototype.slice.call(arguments,0)),c=0;c<f.length;c++)a(f[c]);return b};a._i.push([b,d,g])};a.__SV=1.2;b=c.createElement("script");b.type="text/javascript";b.async=!0;b.src="undefined"!==typeof MIXPANEL_CUSTOM_LIB_URL?
    MIXPANEL_CUSTOM_LIB_URL:"file:"===c.location.protocol&&"//cdn4.mxpnl.com/libs/mixpanel-2-latest.min.js".match(/^\/\//)?"https://cdn4.mxpnl.com/libs/mixpanel-2-latest.min.js":"//cdn4.mxpnl.com/libs/mixpanel-2-latest.min.js";d=c.getElementsByTagName("script")[0];d.parentNode.insertBefore(b,d)}})(document,window.mixpanel||[]);
    mixpanel.init("f034f9ea5eaa4565e87a461e88e654b7");</script>
    <!-- end Mixpanel -->
</head>
<body>
<div class="logout-successful logout-successful-mobile">Log out successful</div>
<header class="d-flex align-items-stretch">
    <div class="container d-flex align-items-stretch">
        <nav class="navbar navbar-expand-md flex-fill align-items-stretch">
            <div class="header-title navbar-brand align-self-center">
                <a href="{% url 'index' %}">White hat news</a>
            </div>
            <div class="search d-flex d-md-none d-lg-none d-xl-none ml-auto align-self-center align-items-stretch">
                <button class="btn btn-search"><img alt="Search" src="{% static 'images/search.svg' %}" /></button>
            </div>
            <button class="btn navbar-toggler collapsed" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon top-bar"></span>
                <span class="navbar-toggler-icon bottom-bar"></span>
            </button>
            <div class="d-none d-md-flex d-lg-flex sort-buttons align-lg-self-stretch align-items-stretch">
                <a href="{% url 'index_popular' %}" class="btn d-flex sort-button {% if request.path == '/popular/' %}active{% endif %}"><span class="align-self-center">Popular</span></a>
                <a href="{% url 'index_latest' %}" class="btn d-flex sort-button {% if request.path == '/latest/' %}active{% endif %}"><span class="align-self-center">Latest</span></a>
            </div>
            <div class="search d-none d-md-flex d-lg-flex d-xl-flex align-self-center align-items-stretch">
                <button class="btn btn-search"><img alt="Search" src="{% static 'images/search.svg' %}" /></button>
            </div>
            <div  class="collapse navbar-collapse flex-md-row flex-lg-row" id="navbarSupportedContent">
                <div class='navbar-expander'></div>
                <div class="header-buttons d-flex d-md-inline-flex d-lg-inline-flex ml-md-auto ml-lg-auto flex-column flex-md-row flex-lg-row">
                    {% if request.user.is_authenticated %}
                        <button type="button" data-toggle="modal" data-target="#suggest_news_modal" class="btn btn-signup red-button suggest-news">Suggest news</button>
                        <div class="btn-group">
                        <button type="button" data-toggle="dropdown" id="userMenu" class="btn profile-image" aria-haspopup="true" aria-expanded="false"><img alt="User image" src="{{ user.userprofile.image_thumbnail_sm.url }}" /></button>
                        <div class="dropdown-menu" aria-labelledby="userMenu">
                            <a class="dropdown-item" href="{% url 'profile' %}"><h3>Profile</h3></a>
                            <a class="dropdown-item button-logout" href="#"><h3>Log out</h3></a>
                        </div>
                        </div>
                        <a class="profile-link link-white d-inline-block d-md-none d-lg-none d-xl-none" href="{% url 'profile' %}">Profile</a>
                        <button type="button" data-toggle="modal" data-target="#suggest_news_modal" class="btn btn-signup red-button d-inline-block d-md-none d-lg-none d-xl-none">Suggest news</button>
                        <button type="button" class="btn btn-transparent button-logout d-inline-block d-md-none d-lg-none d-xl-none"><span class="btn-login-decoration">Log out</span></button>
                    {% else %}
                        <button type="button" data-toggle="modal" data-target="#register-modal" class="btn btn-signup red-button">Sign up</button>
                        <button type="button" data-toggle="modal" data-target="#login-modal" class="btn btn-login btn-transparent primary-button"><span class="btn-login-decoration">Login</span></button>
                    {% endif %}
                </div>
            </div>
        </nav>
    </div>
</header>
<div class="logout-successful logout-successful-desktop">Log out successful</div>
<div class="search-container">
    <form id="search-form" class="container">
        <input id="search-input" type="search" placeholder="Search News & Articles">
    </form>
</div>
{% block mobile_sort_buttons %}
{% endblock mobile_sort_buttons %}
<div id="search-results" class="container main-content"></div>
<div class="container main-content">
{% block content %}{% endblock content %}
</div>
<div class="modal fade" id="base-modal" tabindex="-1" role="dialog">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">
              <img class="d-none d-md-block d-lg-block d-xl-block" alt="Close sign up" src="{% static 'images/close.svg' %}" />
              <img class="d-sm-block d-md-none d-lg-none d-xl-none" alt="Close sign up" src="{% static 'images/close_white.svg' %}" />
          </span>
        </button>
      </div>
      <div class="modal-body">
      </div>
    </div>
  </div>
</div>
{% if not request.user.is_authenticated %}
    <div class="modal fade" id="login-modal" tabindex="-1" role="dialog">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">
              <img class="d-none d-md-block d-lg-block d-xl-block" alt="Close sign up" src="{% static 'images/close.svg' %}" />
              <img class="d-sm-block d-md-none d-lg-none d-xl-none" alt="Close sign up" src="{% static 'images/close_white.svg' %}" />
          </span>
                    </button>
                </div>
                <div class="modal-body">
                    <h5 class="modal-title">Login</h5>
                    <a href="{% url 'social:begin' backend='linkedin-oauth2' %}">Login with Linkedin</a>
                    <form class="form login" id="register_form" method="POST" action="{% url 'django_registration_login' %}">
                        {% csrf_token %}
                        <div class="input-group">
                            <div class="input-with-label {% if form.username.errors %}error{% endif %}">
                                <input id="id_email" type="email" autocomplete="email" name="username">
                                <label for="id_email">Email</label>
                                {% include 'partial/form_error.html' with errors=form.email.errors %}
                                <span class="error-text"></span>
                            </div>
                        </div>
                        <div class="input-group">
                            <div class="input-with-label {% if form.password.errors %}error{% endif %}">
                                <input id="register-password" type="password" autocomplete="current-password" name="password">
                                <label for="register-password">Password</label>
                                {% include 'partial/form_error.html' with errors=form.password1.errors %}
                                <span class="error-text"></span>
                            </div>
                            <a id="password-reset" class="password-reset-link btn-link" href="{% url 'password_reset' %}">Reset password?</a>
                        </div>
                        <span id="non-field" class="error-text "></span>
                        <button type="submit" class="button primary-button" id="register-submit">Login</button>
                    </form>
                    <p><span class="text-opacity">New to White Hats News? </span> <a class="btn-link" href="{% url 'django_registration_register' %}">Sign Up</a></p>
                </div>
            </div>
        </div>
    </div>

<div class="modal fade" id="register-modal" tabindex="-1" role="dialog">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">
              <img class="d-none d-md-block d-lg-block d-xl-block" alt="Close sign up" src="{% static 'images/close.svg' %}" />
              <img class="d-sm-block d-md-none d-lg-none d-xl-none" alt="Close sign up" src="{% static 'images/close_white.svg' %}" />
          </span>
        </button>
      </div>
      <div class="modal-body">
          <h5 class="modal-title">Sign up</h5>
          <form id="register_form" method="POST" action="{% url 'django_registration_register' %}">
              {% csrf_token %}
              <div class="input-group">
                  <div class="input-with-label first-name {% if form.first_name.errors %}error{% endif %}">
                      <input id="register-first-name" type="text" autocomplete="given-name" name="first_name">
                      <label for="register-first-name">First name</label>
                      {% include 'partial/form_error.html' with errors=form.first_name.errors %}
                      <span class="error-text"></span>
                  </div>
                  <div class="input-with-label {% if form.last_name.errors %}error{% endif %}">
                      <input id="register-last-name" type="text" autocomplete="family-name" name="last_name">
                      <label for="register-last-name">Last name</label>
                      {% include 'partial/form_error.html' with errors=form.last_name.errors %}
                      <span class="error-text"></span>
                  </div>
              </div>
              <div class="input-group">
                  <div class="input-with-label {% if form.username.errors %}error{% endif %}">
                      <input id="register-username" type="text" autocomplete="new-username" name="username">
                      <label for="register-username">Username</label>
                      {% include 'partial/form_error.html' with errors=form.username.errors %}
                      <span class="error-text"></span>
                  </div>
              </div>
              <div class="input-group">
                  <div class="input-with-label {% if form.email.errors %}error{% endif %}">
                      <input id="id_email" type="email" autocomplete="email" name="email">
                      <label for="id_email">Email</label>
                      {% include 'partial/form_error.html' with errors=form.email.errors %}
                      <span class="error-text"></span>
                  </div>
              </div>
              <div class="input-group">
                  <div class="input-with-label {% if form.password1.errors %}error{% endif %}">
                      <input id="register-password" type="password" autocomplete="new-password" name="password1">
                      <label for="register-password">Password</label>
                      {% include 'partial/form_error.html' with errors=form.password1.errors %}
                      <span class="error-text"></span>
                  </div>
              </div>
              <button type="submit" class="button primary-button" id="register-submit">Sign up</button>
          </form>
          <p><span class="text-opacity">Have an account?</span> <a class="btn-link" href="{% url 'django_registration_login' %}">Login</a></p>
      </div>
    </div>
  </div>
</div>

{% endif %}
{% include 'partial/modal_suggest_news.html' %}
<div class="modal fade" id="PostModal" tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
        </div>
    </div>
</div>
{% block bottom-of-body %}{% endblock %}
<!-- Bootstrap core JavaScript
     ================================================== -->
<!-- Placed at the end of the document so the pages load faster -->
<script src="{% static 'bootstrap-4.3.1/js/bootstrap.min.js' %}"></script>
<script type="text/javascript" src="{% static 'js/base.js' %}"></script>
{% if request.user.is_authenticated %}
<script type="text/javascript" src="{% static 'js/upvote.js' %}"></script>
{% endif %}
<script type="text/javascript" src="{% static 'js/comments.js' %}"></script>
<script>
    let menu = $('#navbarSupportedContent');
    menu.on('show.bs.collapse', function () {
        $('header').css({position: 'fixed'});
    });
    menu.on('hide.bs.collapse', function () {
        $('header').css({position: 'relative'});
    });
    $(function () {
        $('.button-logout').on('click touch', function (e) {
            e.preventDefault();
            $.ajax({
                method: 'GET',
                url: "{% url 'logout' %}",
                success: function () {
                    let stripe;
                    let width = $(window).width();
                    if (width < 768) {
                        stripe = $('.logout-successful-mobile');
                        if ($('.btn.navbar-toggler[aria-expanded="true"]')) {
                            $('.btn.navbar-toggler').click();
                        }
                    } else {
                        stripe = $('.logout-successful-desktop');
                    }

                    stripe.animate({height: 'toggle'}, function () {
                        setTimeout(function () {
                            stripe.animate({height: 'toggle'}, function () {
                                window.location.href = '{% url "index" %}';
                            })
                        }, 2500);
                    });
                }
            });
        });

        $(document).on('click', '#password-reset', function (e) {
            $.ajax({
                method: "GET",
                url: "{% url 'password_reset' %}",
                success: function (data) {
                    $('#login-modal .modal-body').html(data);
                },
                error: function (data) {
                    console.log(data);
                }
            });
            e.preventDefault();
        });
    })
</script>
<!-- Start of HubSpot Embed Code -->
<script type=“text/javascript” id=“hs-script-loader” async defer src=“http://js.hs-scripts.com/5139372.js”></script>
<!-- End of HubSpot Embed Code -->
{% block js %}
{% endblock %}
</body>

</html>