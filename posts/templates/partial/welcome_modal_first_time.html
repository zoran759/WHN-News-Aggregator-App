{% load staticfiles %}
<div class="modal fade" id="welcome-modal-first-time" tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header-image-background">
                <div class="modal-header-image modal-header" style="background-image: url('{% static 'images/modal-background.png' %}')">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">
                        <img class="d-block" alt="Close sign up" src="{% static 'images/close_white.svg' %}" />
                    </span>
                    </button>
                </div>
            </div>
            <div class="modal-body">
                <h5 class="modal-title">Welcome to White hat news</h5>
                <p class="grey-text">Our experience spans organizations great and small. We know how to deliver solutions that fit your now...</p>
                <a class="button button-linkedin" href="{% url 'social:begin' backend='linkedin-oauth2' %}"><img alt="LinkedIn Logo" src="{% static 'images/linkedin_logo.svg' %}"><div class="center">Linkedin Sign Up</div></a>
                <button class="button primary-button button-email"><span class="btn-decoration">Email Sign Up</span></button>

                <div class="checkbox">
                    <input id="terms_of_service" type="checkbox" name="terms_of_service" checked>
                    <label for="terms_of_service">
                        I agree to the <a href="#" class="btn-link"> Terms of Service </a> and <a href="#" class="btn-link"> Privacy Policy </a>
                    </label>
                    <span class="error-text"></span>
                </div>
                <p><span class="text-opacity">Have an account? </span> <a class="btn-link" href="{% url 'index' %}?login=true">Login</a></p>
            </div>
        </div>
    </div>
</div>
<script>
    $(function () {
        $(document).on('click touch', '#welcome-modal-first-time a, #welcome-modal-first-time button', function (e) {
            const checkbox = $('#welcome-modal-first-time input[type="checkbox"]');
            const button = $(this);
            if (!checkbox[0].checked) {
                e.preventDefault();
                checkbox.addClass('error');
                checkbox.siblings('.error-text').text('You need to agree to the Terms of Service and Privacy Policy before registering.');
            } else if (button.hasClass('button-email')) {
                $('#welcome-modal-first-time').modal('hide');
                $('.btn-signup').click()
            }
        });

        $(document).on('click touch', '#welcome-modal-first-time input[type="checkbox"], #welcome-modal-first-time label', function () {
            const checkbox = $('#welcome-modal-first-time input[type="checkbox"]');
            checkbox.removeClass('error');
            checkbox.siblings('.error-text').html('');
        });
    });
</script>